<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Add New Product</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <link rel="stylesheet" href="add-product.css">
</head>
<body>
  <main class="background">
    <section class="login-card">
      
      <header>
        <button class="back-btn" id="back-btn">
          <i class="fas fa-arrow-left"></i>
        </button>
        <h2>Add New Product</h2>
      </header>

      <form id="product-form">
        <label for="productName">Product Name</label>
        <input type="text" id="productName" required>

        <label for="price">Price (R)</label>
        <input type="number" id="price" step="0.01" min="0" inputmode="numeric" required>

        <label for="quantity">Quantity</label>
        <input type="number" id="quantity" min="0" step="1" inputmode="numeric" required>

        <label for="description">Description</label>
        <textarea id="description" rows="4" required></textarea>

        <label for="image">Upload Image</label>
        <input type="file" id="image" accept="image/*" multiple required>

        

        <p id="select-main-text" style="display: none;">Select the main image by clicking on it:</p>
        <output id="preview-images"></output>
        <input type="hidden" id="mainImageIndex">
        <button type="submit" class="login-btn">Submit Product</button>
      </form>
    </section>
  </main>

  <script type="module" src="add-product.js"></script>

  <script>
    const priceInput = document.getElementById("price");
    const quantityInput = document.getElementById("quantity");
  
    // Block e, +, - for both inputs
    function preventInvalidInput(e) {
      const invalidChars = ["e", "E", "+", "-"];
      if (invalidChars.includes(e.key)) {
        e.preventDefault();
      }
    }
  
    // Enforce 2 decimal places in price
    function enforceTwoDecimalPlaces(e) {
      const value = e.target.value;
  
      // Match up to 2 decimal places
      const match = value.match(/^(\d+)(\.\d{0,2})?/);
      if (match) {
        e.target.value = match[0];
      }
    }
  
    priceInput.addEventListener("keydown", preventInvalidInput);
    priceInput.addEventListener("input", enforceTwoDecimalPlaces);
    quantityInput.addEventListener("keydown", preventInvalidInput);
  </script> 
  
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</body>
</html>
